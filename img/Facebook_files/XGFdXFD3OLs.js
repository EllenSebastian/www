/*!CK:3272188033!*//*1413179065,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["M+cY3"]); }

__d("ComposerXHiddenInputClear",[],function(a,b,c,d,e,f){function g(h){h.element.value='';}e.exports=g;},null);
__d("ComposerXSessionInputClear",[],function(a,b,c,d,e,f){function g(h){h.element.value=(new Date()).valueOf().toString().substr(0,10);}e.exports=g;},null);
__d("ComposerXStatusAttachment",["Arbiter","BanzaiODS","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXAttachmentUtils","ComposerXController","ComposerXDragDrop","ComposerXPrivacyWidgetTags","DOM","Event","Parent","URI","URLScraper","copyProperties","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){for(var v in i)if(i.hasOwnProperty(v))x[v]=i[v];var w=i===null?null:i.prototype;x.prototype=Object.create(w);x.prototype.constructor=x;x.__superConstructor__=i;function x(y,z,aa){"use strict";i.call(this);this._root=y;this._tagger=z;this._config=aa;this.attachmentClassName=aa.classname;}x.prototype.getRoot=function(){"use strict";return this._root;};x.prototype.initWithComponents=function(){"use strict";var y=this.getComponent('maininput');k.initMentions(y,this._config.mentionsPlaceholder,this.getComposerID());this._tagger.init(this);this._privacyWidgetTags=new n(this);j.trackCityChanges(this);var z=o.find(y.element,'textarea.input');if(!this._scraper){this._scraper=new s(z);this._scraper.subscribe('match',function(ca,da){if(!this._config.scraper_endpoint)return;var ea=new r(this._config.scraper_endpoint);ea.addQueryData({scrape_url:encodeURIComponent(da.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});l.getAttachment(this._root,ea.toString());}.bind(this));}this._scraper.enable();if(this._config.textOnlyEdit){this._scraper.disable();this._scraper=null;}if(!this._isEditComposer()){this._scraper.check();}else{var aa=z.value.length;z.setSelectionRange(aa,aa);}if(this._config.plus_version){this._dragdrop=new m(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();}var ba=o.scry(this._root,"._9s");if(ba.length>0)this._removeListener=p.listen(ba[0],'click',function(){var ca=o.scry(this._root,'input[name="hide_object_attachment"]');if(ca.length!==0)ca[0].value=1;var da=this._config.remove_endpoint;if(!da)da=this._config.remove_url;h.bumpEntityKey('content_production','composer.remove_link.fbfeed');l.getAttachment(this._root,da);}.bind(this));if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);g.inform('ComposerXStatusAttachment/ready',this._composerID,g.BEHAVIOR_STATE);};x.prototype.cleanup=function(){"use strict";this._tagger.cleanup();this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._scraper.disable();if(this._removeListener){this._removeListener.remove();this._removeListener=null;}if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}};x.prototype.reset=function(){"use strict";this._tagger.reset();};x.prototype.canSwitchAway=function(){"use strict";return !q.byClass(this._root,'async_saving');};x.prototype.allowOGTagPreview=function(){"use strict";return true;};x.prototype._isEditComposer=function(){"use strict";return !!this.getComponent('editparams');};t(x.prototype,{_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_removeListener:null});e.exports=x;},null);
__d("ComposerXCameraIconBehavior",["Arbiter","ComposerXMediaUploadHandler","CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l={initCameraIcon:function(m){this._cameraIcon=m.getComponent('cameraicon');if(!this._config.showCameraIcon){i.hide(this._cameraIcon.element);return;}i.show(this._cameraIcon.element);var n=this._cameraIcon.instance,o=new h(this._config.composerID,{imagesOnly:this._config.imagesOnly,isEditComposer:this._config.isEditComposer,photoUploadOverrideEndpoint:this._config.photoUploadOverrideEndpoint});this._listeners.push(j.listen(this._cameraIcon.element,'click',function(){o.fetchAttachments();g.inform('cameraicon/click');}.bind(this)));this._subscriptions.push(n.subscribe('change',function(){o.handleFileSelected(n);i.addClass(this._cameraIcon.element,"_19_a");}.bind(this)));}};e.exports=l;},null);
__d("ComposerXPlusTagger",["ComposerXCameraIconBehavior","ComposerXStandardTagger","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j){var k=i(h,j(g));for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o){"use strict";k.call(this,o);this._eventuallyTagger=null;}n.prototype.init=function(o){"use strict";m.init.call(this,o);if(o.getComponent('cameraicon'))this.initCameraIcon(o);};n.prototype._nonObstrusiveSwitchToTagger=function(o){"use strict";var p=this._onTaggerShowCallbacks[o];delete this._onTaggerShowCallbacks[o];this.switchToTagger(o);this._dontHideTaggerOnMentionsFocus=o;this._onTaggerShowCallbacks[o]=p;};n.prototype.eventuallySwitchToTagger=function(o){"use strict";if(!this.isAnyTaggerShown()){this._nonObstrusiveSwitchToTagger(o);}else if(this._currentTagger!==o)this._eventuallyTagger=o;};n.prototype.switchToTagger=function(o){"use strict";if(this._eventuallyTagger===o)this._eventuallyTagger=null;this._nonEventuallyHideTaggers();this._showTagger(o);};n.prototype.hideTaggers=function(){"use strict";m.hideTaggers.call(this);if(this._eventuallyTagger){this._nonObstrusiveSwitchToTagger(this._eventuallyTagger);this._eventuallyTagger=null;}};n.prototype._nonEventuallyHideTaggers=function(){"use strict";m.hideTaggers.call(this);};n.prototype._hideTaggersFromMentionsInputClick=function(){"use strict";if(this._currentTagger!=this._dontHideTaggerOnMentionsFocus){this.eventuallySwitchToTagger(this._dontHideTaggerOnMentionsFocus);m._hideTaggersFromMentionsInputClick.call(this);}};e.exports=n;},null);
__d("ComposerXPlusTaggerWithOG",["ComposerXOGTaggerBehavior","ComposerXPlusTagger","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j){var k=i(h,j(g));for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(){"use strict";if(k!==null)k.apply(this,arguments);}n.prototype.init=function(o){"use strict";m.init.call(this,o);this.initOGTagger(o);};n.prototype.cleanup=function(){"use strict";m.cleanup.call(this);this.cleanupOGTagger();};e.exports=n;},null);
__d("ComposerXOGTaggerReset",["CSS"],function(a,b,c,d,e,f,g){function h(i){i.instance.reset();g.hide(i.element);}e.exports=h;},null);
__d("ComposerXPeopleTaggerReset",["CSS"],function(a,b,c,d,e,f,g){function h(i){i.instance.reset();g.hide(i.element);}e.exports=h;},null);
__d("ComposerXPlaceTaggerReset",["CSS"],function(a,b,c,d,e,f,g){function h(i){i.instance.getCore().reset();g.hide(i.element);}e.exports=h;},null);